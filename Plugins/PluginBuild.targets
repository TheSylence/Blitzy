<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
	<PropertyGroup>
		<TargetPluginDirectory>$(SolutionDir)\Blitzy\bin\$(ConfigurationName)\Plugins\$(ProjectName)</TargetPluginDirectory>
	</PropertyGroup>

	<Target AfterTargets="AfterBuild" Name="CleanupBlitzyPlugin">
		<ItemGroup>
			<FilesToDelete Include="$(TargetPluginDirectory)*" />
		</ItemGroup>

		<Message Text="Cleaning up plugin directory for $(ProjectName)" />
		<Delete Files="@(FilesToDelete)" />
	</Target>
	<Target Name="MoveBlitzyPlugin" AfterTargets="CleanupBlitzyPlugin">
		<ItemGroup>
			<FilesToCopy Include="$(TargetDir)*" Exclude="$(TargetDir)*Blitzy.PluginInterfaces*" />
		</ItemGroup>

		<Message Text="Copying plugin $(ProjectName)" />

		<Copy SourceFiles="@(FilesToCopy)" DestinationFolder="$(TargetPluginDirectory)" />
	</Target>
	
</Project>